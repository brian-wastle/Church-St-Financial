<form *ngIf="!hasValidSession" [formGroup]="authForm" (ngSubmit)="login()" class="auth-form-inline">
  <div class="p-field">
    <label for="username">Email:</label>
    <input id="username" type="text" pInputText formControlName="username" placeholder="Email" required />
    <small *ngIf="authForm.get('username')?.invalid && (authForm.get('username')?.touched || authForm.get('username')?.dirty)" class="p-error">
      Username is required.
    </small>
  </div>

  <div class="p-field">
    <label for="password">Password:</label>
    <p-password id="password" formControlName="password" [toggleMask]="true" [feedback]="false" placeholder="Password" required></p-password>
    <small *ngIf="authForm.get('password')?.invalid && (authForm.get('password')?.touched || authForm.get('password')?.dirty)" class="p-error">
      Password is required.
    </small>
  </div>

  <div class="p-field-checkbox">
    <p-checkbox formControlName="rememberDevice" binary="true"></p-checkbox>
    <label for="rememberDevice">Remember Me</label>
  </div>

  <div class="p-field">
    <button pButton type="submit" label="{{ loading ? 'Loading...' : 'Sign In' }}" [disabled]="authForm.invalid || loading"></button>
  </div>

  <div *ngIf="errorMessage" class="p-message p-message-error">
    <span>{{ errorMessage }}</span>
  </div>
</form>
